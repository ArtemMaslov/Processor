; Инициализация
push 0
pop qx   ; Угол

; 60 x 60 Разрешение экрана
; 128 - Смещение для видео памяти

; Цикл угла от 0 до 45
iteration:

; Вычисляем синус и косинус угла
push qx
sin
pop wx
push qx
cos
pop ex

; Находим относительные координаты точки
push ex
push 20
mul
int
pop ex ; x
push wx
push 20
mul
int
pop wx ; y

; Рисуем 4 линии
; Горизонтальные ()
call draw_brackets

; Меняем x на y
push wx
pop fx
push ex
pop wx
push fx
pop ex

; Вертикальные()
call draw_brackets
dsp

; Итерация
push qx
push 1
add
pop qx
; Условие выхода из цикла
push qx
push 45
ja stop

jmp iteration

; Рисует точку
draw_point:

pop fx
pop sx ; y
pop dx ; x
push fx

push sx
push 60
mul
push dx
add
push 128
add
pop fx
push 1
pop [fx]

ret

draw_brackets:

; Инициализация счётчика
push 30
push ex ; x
sub
pop rx

; Верхняя линия
line1:

push rx
push 30
push wx ;y
sub
call draw_point

; Итерация
push rx
push 1
add
pop rx
; Условие выхода из цикла
push rx
push 30
push ex ;x
add
jbe line1

; Инициализация счётчика
push 30
push ex ; x
sub
pop rx

; Нижная линия
line2:

push rx
push 30
push wx ;y
add
call draw_point

; Итерация
push rx
push 1
add
pop rx
; Условие выхода из цикла
push rx
push 30
push ex ;x
add
jbe line2

ret

stop:

dsp
hlt