; Инициализация
push 0
pop qx   ; Угол

; 60 x 60 Разрешение экрана
; 128 - Смещение для видео памяти

; Цикл угла от 0 до 45
iteration:

; Вычисляем синус и косинус угла
push qx
sin
pop wx
push qx
cos
pop ex

; Находим относительные координаты точки
push ex
push 20
mul
int
pop ex ; x
push wx
push 20
mul
int
pop wx ; y

; Рисуем 8 точек
; Горизонтальные ()
call drawBrackets

; Меняем x на y
push wx
pop fx
push ex
pop wx
push fx
pop ex

; Вертикальные()
call drawBrackets

; Итерация
push qx
push 1
add
pop qx
; Условие выхода из цикла
push qx
push 45
ja stop

jmp iteration

; Рисует точку
draw_point:

pop fx
pop sx ; y
pop dx ; x
push fx

push sx
push 60
mul
push dx
add
push 128
add
pop fx
push 1
pop [fx]

ret

drawBrackets:

push 30
push ex
sub
push 30
push wx
sub
call draw_point

push 30
push ex
sub
push 30
push wx
add
call draw_point

push 30
push ex
add
push 30
push wx
sub
call draw_point

push 30
push ex
add
push 30
push wx
add
call draw_point

ret

stop:

dsp
hlt